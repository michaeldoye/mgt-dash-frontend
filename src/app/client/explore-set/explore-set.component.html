<ng-container *ngIf="(cards$ | async) as cards else loading">
  <mat-toolbar>
    <mat-toolbar-row>
      <h1>
        <button mat-icon-button routerLink="/home">
          <mat-icon>arrow_back</mat-icon>
        </button> 
        &nbsp; 
        {{ cards?.setData.name }}
      </h1>
      <span fxFlex></span>
      <mtg-dash-filter [sortOptions]="sortOptions" (onSearchChange)="query = $event"></mtg-dash-filter>
    </mat-toolbar-row>
    <mat-toolbar-row>
      <span class="set-desc"><small>Type: {{ cards?.setData.type }}</small></span>
      <span fxFlex></span>
      <span class="set-desc"><small>Released: {{ cards?.setData.releaseDate }}</small></span>
      <span fxFlex></span>
      <span class="set-desc"><small>Block/Code: {{ cards?.setData.block ? cards?.setData.block : cards?.setData.code }}</small></span>
    </mat-toolbar-row>
  </mat-toolbar>






  <cdk-drop class="card-container" 
    #child
    fxLayout="row wrap" 
    fxLayoutGap="10px"
    (dropped)="drop($event)"
    [connectedTo]="connectedParent"
    [data]="cards?.cardData">
    <mtg-dash-single-card 
      *ngFor="let card of cards?.cardData | serchPipe: query" 
      [card]="card" 
      fxFlex="32.5%"
      (cdkDragStarted)="onDragStart($event)"
      cdkDrag>
    </mtg-dash-single-card>      
  </cdk-drop>




  <!-- <div class="card-container" 
    fxLayout="row wrap" 
    fxLayoutGap="10px">
    <mtg-dash-single-card 
      *ngFor="let card of cards?.cardData | serchPipe: query" 
      [card]="card" 
      fxFlex="32.5%">
    </mtg-dash-single-card>
  </div> -->

  <div fxLayout="row" fxLayoutAlign="center center" class="load-more-container">
    <spinner-button [options]="btnOpts" (click)="loadMore()"></spinner-button>
  </div>
</ng-container>

<ng-template #loading>
  <div fxLayout="row" fxLayoutAlign="center center">
    <mat-spinner diameter="45" strokeWidth="3"></mat-spinner>
  </div>
</ng-template>